<mxfile modified="2020-04-21T08:34:23.793Z" host="app.diagrams.net" agent="5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Safari/605.1.15" etag="YcbGbrlEF4sq2Lvp4fmN" version="13.0.0" type="github">
  <diagram id="Ht1M8jgEwFfnCIfOTk4-" name="Page-1">
    <mxGraphModel dx="1170" dy="733" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-62" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="420" y="40" width="700" height="740" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-14" value="Baza danych BAS" style="fillColor=none;strokeColor=#5A6C86;dashed=1;verticalAlign=top;fontStyle=0;fontColor=#5A6C86;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry width="320" height="360" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-16" value="Tabele źródłowe BAS" style="shadow=0;dashed=0;strokeColor=#36393d;fillColor=#ffcc99;labelPosition=center;verticalLabelPosition=top;verticalAlign=bottom;align=center;outlineConnect=0;shape=mxgraph.veeam.table;html=1;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="60" width="50.8" height="50.8" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-17" value="BAS_JOB_1&lt;br style=&quot;font-size: 10px&quot;&gt;REFRESH_LOCAL_BAS_DATA" style="shape=image;html=1;verticalLabelPosition=middle;labelBackgroundColor=#ffffff;verticalAlign=middle;imageAspect=1;aspect=fixed;image=img/clipart/Gear_128x128.png;labelPosition=right;align=left;fontSize=10;fontColor=#000000;whiteSpace=wrap;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="150" width="52" height="61" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-19" value="Adresy&lt;br style=&quot;font-size: 10px;&quot;&gt;Struktura płaska" style="shadow=0;dashed=0;html=1;strokeColor=#36393d;fillColor=#cce5ff;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="250" width="50.8" height="50.8" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-21" value="" style="endArrow=classic;html=1;fontColor=#333333;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-17" target="Rd7k1DUN7EmRphaQOlK2-16" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40" y="220" as="sourcePoint" />
            <mxPoint x="10" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-22" value="" style="endArrow=classic;html=1;fontColor=#333333;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-17" target="Rd7k1DUN7EmRphaQOlK2-19" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="76" y="160" as="sourcePoint" />
            <mxPoint x="75.63591331269356" y="120.79999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-23" value="BAS_JOB_2&lt;br style=&quot;font-size: 10px&quot;&gt;SEND_TO_ES" style="shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image=img/clipart/Gear_128x128.png;labelPosition=center;align=center;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="160" y="244.89999999999998" width="52" height="61" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-24" value="" style="endArrow=classic;html=1;fontColor=#333333;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-23" target="Rd7k1DUN7EmRphaQOlK2-19" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="76" y="221" as="sourcePoint" />
            <mxPoint x="75.63664596273304" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-25" value="Baza danych CBK" style="fillColor=none;strokeColor=#5A6C86;dashed=1;verticalAlign=top;fontStyle=0;fontColor=#5A6C86;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry y="380" width="320" height="360" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-26" value="Tabele źródłowe CBK" style="shadow=0;dashed=0;strokeColor=#36393d;fillColor=#ffcc99;labelPosition=center;verticalLabelPosition=top;verticalAlign=bottom;align=center;outlineConnect=0;shape=mxgraph.veeam.table;html=1;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="430" width="50.8" height="50.8" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-27" value="CBK_JOB_1&lt;br style=&quot;font-size: 10px&quot;&gt;REFRESH_LOCAL_CBK_DATA" style="shape=image;html=1;verticalLabelPosition=middle;labelBackgroundColor=#ffffff;verticalAlign=middle;imageAspect=1;aspect=fixed;image=img/clipart/Gear_128x128.png;labelPosition=right;align=left;fontSize=10;fontColor=#000000;whiteSpace=wrap;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="520" width="52" height="61" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-28" value="Klienci&lt;br style=&quot;font-size: 10px&quot;&gt;Struktura płaska" style="shadow=0;dashed=0;html=1;strokeColor=#36393d;fillColor=#cce5ff;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="40" y="620" width="50.8" height="50.8" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-29" value="" style="endArrow=classic;html=1;fontColor=#333333;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-27" target="Rd7k1DUN7EmRphaQOlK2-26" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-40" y="590" as="sourcePoint" />
            <mxPoint x="10" y="540" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-30" value="" style="endArrow=classic;html=1;fontColor=#333333;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-27" target="Rd7k1DUN7EmRphaQOlK2-28" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="76" y="530" as="sourcePoint" />
            <mxPoint x="75.63591331269356" y="490.79999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-31" value="CBK_JOB_2&lt;br style=&quot;font-size: 10px&quot;&gt;SEND_TO_ES" style="shape=image;html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;imageAspect=1;aspect=fixed;image=img/clipart/Gear_128x128.png;labelPosition=center;align=center;fontSize=10;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="160" y="614.9" width="52" height="61" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-32" value="" style="endArrow=classic;html=1;fontColor=#333333;fillColor=#6d8764;strokeColor=#666666;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-31" target="Rd7k1DUN7EmRphaQOlK2-28" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="76" y="591" as="sourcePoint" />
            <mxPoint x="75.63664596273304" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-33" value="CBK_PARAMETERS" style="shadow=0;dashed=0;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=8;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="240" y="410" width="50.8" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-34" value="CBK_ES_LOGS" style="shadow=0;dashed=0;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=8;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="240" y="450" width="50.8" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-35" value="BAS_PARAMETERS" style="shadow=0;dashed=0;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=8;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="250" y="40" width="50.8" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-36" value="BAS_ES_LOGS" style="shadow=0;dashed=0;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;outlineConnect=0;shape=mxgraph.veeam.table;fontSize=8;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="250" y="80" width="50.8" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-37" value="Klaster Elasticsearch " style="fillColor=none;strokeColor=#5A6C86;dashed=1;verticalAlign=top;fontStyle=0;fontColor=#5A6C86;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="430" y="120" width="140" height="500" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-40" value="&lt;b&gt;Alias:&lt;br&gt;&lt;/b&gt;*_bas_addr" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3334B9;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.global_secondary_index;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="480" y="255.40000000000003" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-44" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;fontSize=8;fontColor=#000000;entryX=0.5;entryY=1;entryDx=0;entryDy=0;entryPerimeter=0;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-40" target="Rd7k1DUN7EmRphaQOlK2-42" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="603.75" y="324" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-42" value="&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Index:&lt;/b&gt;&lt;br&gt;*_bas_addr_01&lt;/span&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.global_secondary_index;fillColor=#2E73B8;gradientColor=none;fontSize=8;fontColor=#000000;labelPosition=center;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="480" y="180.00000000000003" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-45" value="&lt;b&gt;Alias&lt;/b&gt;:&lt;br&gt;*_cbk_cust" style="outlineConnect=0;fontColor=#232F3E;gradientColor=none;fillColor=#3334B9;strokeColor=none;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;fontSize=12;fontStyle=0;aspect=fixed;pointerEvents=1;shape=mxgraph.aws4.global_secondary_index;labelPosition=center;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="480" y="540" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-46" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;fontSize=8;fontColor=#000000;labelPosition=center;verticalLabelPosition=top;align=center;verticalAlign=bottom;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-45" target="Rd7k1DUN7EmRphaQOlK2-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="603.75" y="523.2" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-47" value="&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Index:&lt;br&gt;&lt;/b&gt;*_cbk_cust_01&lt;/span&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=top;verticalAlign=bottom;align=center;html=1;shape=mxgraph.aws3.global_secondary_index;fillColor=#2E73B8;gradientColor=none;fontSize=8;fontColor=#000000;labelPosition=center;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="480" y="460" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-48" value="" style="endArrow=classic;html=1;fontColor=#333333;fillColor=#6d8764;strokeColor=#666666;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-31" target="Rd7k1DUN7EmRphaQOlK2-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="655.4000000000001" as="sourcePoint" />
            <mxPoint x="100.80000000000018" y="655.4000000000001" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-51" value="utl_http (REST/https)" style="edgeLabel;html=1;align=center;verticalAlign=bottom;resizable=0;points=[];fontSize=10;fontColor=#000000;labelPosition=center;verticalLabelPosition=top;" parent="Rd7k1DUN7EmRphaQOlK2-48" vertex="1" connectable="0">
          <mxGeometry x="-0.3126" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-49" value="" style="endArrow=classic;html=1;fontColor=#333333;fillColor=#6d8764;strokeColor=#666666;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-23" target="Rd7k1DUN7EmRphaQOlK2-40" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="285.4000000000001" as="sourcePoint" />
            <mxPoint x="100.80000000000018" y="285.4000000000001" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-50" value="utl_http (REST/https)" style="edgeLabel;html=1;align=center;verticalAlign=bottom;resizable=0;points=[];fontSize=10;fontColor=#000000;labelPosition=center;verticalLabelPosition=top;" parent="Rd7k1DUN7EmRphaQOlK2-49" vertex="1" connectable="0">
          <mxGeometry x="0.1604" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-55" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;fontSize=10;fontColor=#000000;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-54" target="Rd7k1DUN7EmRphaQOlK2-40" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="600" y="370" />
              <mxPoint x="600" y="275" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-54" value="Aplikacje /&lt;br&gt;Serwisy klienckie" style="aspect=fixed;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;fillColor=#00188D;shape=mxgraph.mscae.enterprise.client_application;fontSize=10;fontColor=#000000;" parent="Rd7k1DUN7EmRphaQOlK2-62" vertex="1">
          <mxGeometry x="650" y="354" width="50" height="32" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#666666;fontSize=10;fontColor=#000000;exitX=0.08;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;" parent="Rd7k1DUN7EmRphaQOlK2-62" source="Rd7k1DUN7EmRphaQOlK2-54" target="Rd7k1DUN7EmRphaQOlK2-45" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="380" as="sourcePoint" />
            <mxPoint x="529.9897501601538" y="285" as="targetPoint" />
            <Array as="points">
              <mxPoint x="654" y="380" />
              <mxPoint x="600" y="380" />
              <mxPoint x="600" y="560" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-57" value="REST/https" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=10;fontColor=#000000;" parent="Rd7k1DUN7EmRphaQOlK2-56" vertex="1" connectable="0">
          <mxGeometry x="-0.1873" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-63" value="&lt;h1&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;JOB: REFRESH_LOCAL_*_DATA&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Zadanie automatyczne odpowiedzialne za odświeżanie danych w lokalnej strukturze płaskiej. Zadanie uruchamia się okresowo i realizuje następującą sekwencję operacji:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;pobranie ostatniego HWM, dla którego wykonano z sukcesem poprzednie odświeżenie danych&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;pobranie danych z tabel źródłowych, których wyznaczony HWM jest większy od pobranego w poprzednim punkcie&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;przygotowanie dla każdego z pobranych rekordów dokumentu JSON + wyznaczenie sumy SHA-2&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;aktualizacja struktury płaskiej w oparciu o dane przygotowane w poprzednim punkcie (możliwa zmiana istniejącego statusu z INDEXED na TO_INDEX lub dodanie nowych rekordów TO_INDEX; plus ewentualnie TO_DELETE jeśli to jest możliwe)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;zapisanie do logów maksymalnego HWM, dla którego wykonano odświeżenie&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;&lt;p style=&quot;font-size: 11px&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontSize=10;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="40" y="270" width="350" height="270" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-64" value="&lt;h1&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;Struktury płaskie w DB: Adresy / Klienci&lt;/font&gt;&lt;/h1&gt;&lt;h1 style=&quot;font-size: 11px&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;Lokalne tabele w bazach danych CBK/BAS&lt;/span&gt;&lt;br&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Zawierają:&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;klucz rekordu = klucz dokumentu w ES&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;dokument JSON do zaindeksowania&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;skrót SHA-2 dokumentu (i klucza)&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;status obsługi rekordu (TO_INDEX,&amp;nbsp;INDEXED, TO_DELETE/DELETED - adresy nie giną / klienci chyba też nie)&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Odświeżane na bieżąco przez JOB w oparciu o HWM zmian&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Zmiana skrótu SHA-2 dokumentu JSON powoduje oznaczenie rekordu statusem TO_INDEX&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-weight: normal&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Zabezpieczenie przed utratą serwera elastic i koniecznością szybkiego odbudowania indeksów&lt;/font&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontSize=10;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="40" y="40" width="350" height="220" as="geometry" />
        </mxCell>
        <mxCell id="Rd7k1DUN7EmRphaQOlK2-65" value="&lt;h1&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;JOB: SEND_TO_ES&lt;/font&gt;&lt;/h1&gt;&lt;div style=&quot;font-size: 11px&quot;&gt;&lt;font style=&quot;font-size: 11px&quot;&gt;Zadanie automatyczne odpowiedzialne za przekazywanie dokumentów JSON zgromadzonych w lokalnej strukturze płaskiej do serwera Elasticsearch. Zadanie działa wg następującego algorytmu:&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;pobranie z lokalnej struktury płaskiej rekordów w statusach wskazujących na konieczność przesłania (TO_INDEX, TO_DELETE)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;przygotowanie opisu zmian w formie new-line-delimited-json (format używany przez BULK API&amp;nbsp;Elasticsearch) - sklejenie kolejnych JSON-ów z tabeli&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;wywołanie REST API&amp;nbsp;Elasticsearch przy użyciu pakietu UTL_HTTP (odwołanie przez https)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;oznaczenie rekordów przesłanych statusem INDEXED lub DELETED&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;div&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot;font-size: 11px&quot;&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontSize=10;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="40" y="550" width="350" height="230" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
